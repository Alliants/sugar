<%
	anchor ||= nil
%>
<div class="pagination">
	<% if p.pages > 1 %><div class="links">
		<%= link_to_if p.previous_page, "&lt; Prev", {:page => p.previous_page, :anchor => anchor} %>

		<% nearest_pages = p.nearest_pages(9) %>
		<% if nearest_pages.first > 1 %>
			<%= link_to_unless (p.page == 1), "1", {:page => 1, :anchor => anchor} %>
		<% end %>
		<% if nearest_pages.first > 2 %>&hellip;<% end %>
		<% nearest_pages.each do |np| %>
			<%= link_to_unless (p.page == np), np, {:page => np, :anchor => anchor} %>
		<% end %>
		<% if nearest_pages.last < (p.last_page - 1) %>&hellip;<% end %>
		<% if nearest_pages.last < p.last_page %>
			<%= link_to_unless (p.page == p.last_page), "#{p.last_page}", {:page => p.last_page, :anchor => anchor} %>
		<% end %>

		<%= link_to_if p.next_page,     "Next &gt;", {:page => p.next_page, :anchor => anchor} %>
	</div><% end %>
	<%= p.offset + 1 %> to <span class="shown_items_count"><%= p.offset + p.length %></span> of <span class="total_items_count"><%= p.total_count %></span>
</div>
